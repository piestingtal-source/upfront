define(["jquery","util.tooltips","helper.boxes","modules/panel"],function($,tooltips,panel){tourStepsGrid=[{beginning:true,title:"Willkommen im UpFront Visuellen Editor!!",content:"<p>Wenn Du zum ersten Mal im UpFront Visuellen Editor arbeitest, <strong>empfehlen wir, dieser Tour zu folgen, damit Du UpFront</strong> optimal nutzen kannst.</p><p>Wenn Du Erfahrung hast oder sofort eintauchen möchtest, klicke jederzeit oben rechts auf die Schaltfläche zum Schließen.</p>"},{target:$("li#mode-grid"),title:"Modusauswahl",content:"<p>Der UpFront Visuelle Editor ist in zwei Modi unterteilt.</p><p><ul><li><strong>Gitter</strong> &ndash; Erstelle Deine Layouts</li><li><strong>Designe</strong> &ndash; füge Farben hinzu, passe Schriftarten an, und vieles mehr!</li></ul></p>",position:{my:"top left",at:"bottom center"}},{target:$("#layout-selector-select-content"),title:"Layoutauswahl",content:'<p style="font-size:12px;">Da möglicherweise nicht jede Seite gleich sein soll, kannst Du mit der Layoutauswahl auswählen, welche Seite, welcher Beitrag oder welches Archiv bearbeitet werden soll.</p><p style="font-size:12px;">Die Layoutauswahl basiert auf Vererbung. Du kannst beispielsweise das Layout "Seite" anpassen und alle Seiten folgen diesem Layout. Außerdem kannst Du eine bestimmte Seite anpassen und sie unterscheidet sich von allen anderen Seiten.</p><p style="font-size:12px;">Mit der Layoutauswahl kannst Du so präzise oder breit sein, wie Du möchtest. Es liegt ganz bei Dir!</p>',position:{my:"top center",at:"bottom center"}},{target:$("div#box-grid-manager"),title:"Das UpFront Gitter",content:'<p>Jetzt können wir mit dem UpFront Gitter beginnen. Mit anderen Worten, das gute Zeug.</p><p>Um Dein erstes Layout zu erstellen, wähle rechts eine Voreinstellung aus, um das Gitter vorab auszufüllen. Du kannst auch "Leeres Gitter verwenden" auswählen, um mit einem vollständig leeren Gitter zu beginnen.</p><p>Sobald Du eine Voreinstellung ausgewählt hast, klicke auf "Fertig stellen".</p>',position:{my:"right top",at:"left center"},nextHandler:{showButton:false,clickElement:"#grid-manager-button-preset-use-preset, span.grid-manager-use-empty-grid",message:'Klicke auf <strong>"Fertig stellen"</strong> oder <strong>"Leeres Gitter verwenden"</strong>, um fortzufahren.'}},{iframeTarget:"div.grid-container",title:"Blöcke hinzufügen",content:"<p>Um einen Block hinzuzufügen, platziere einfach Deine Maus im Raster und klicke auf die Stelle, an der sich der obere linke Punkt des Blocks befinden soll.</p><p>Ziehe Deine Maus und der Block wird angezeigt! Sobald der Block angezeigt wird, kannst Du den Blocktyp auswählen.</p><p>Tipp: Mache Dir keine Sorgen um die Genauigkeit. Du kannst den Block jederzeit verschieben oder seine Größe ändern.</p>",position:{my:"right top",at:"left top",adjustY:100},maxWidth:280},{iframeTarget:"div.grid-container",title:"Blöcke anpassen",content:'					<p style="font-size:12px;">Nachdem Du die gewünschten Blöcke zu Deinem Layout hinzugefügt hast, kannst Du die Optionen des Blocks jederzeit verschieben, in der Größe ändern, löschen oder ändern.</p>					<ul style="font-size:12px;">						<li><strong>Blöcke verschieben</strong> &ndash; Klicke und ziehe den Block. Wenn Du mehrere Blöcke gleichzeitig verschieben möchtest, doppelklicke auf einen Block, um ihn einzugeben <em>Massenblock-Auswahlmodus</em>.</li>						<li><strong>Ändern der Größe von Blöcken</strong> &ndash; Nimm den Rand oder die Ecke des Blocks und ziehe die Maus.</li>						<li><strong>Blockoptionen (z.B. Header-Bild)</strong> &ndash; Bewege den Mauszeiger über den Block und klicke oben rechts auf das Symbol für die Blockoptionen.</li>						<li><strong>Blöcke löschen</strong> &ndash; Bewege die Maus über den gewünschten Block und klicke oben rechts auf das Symbol <em>X</em>.</li>					</ul>',position:{my:"right top",at:"left top",adjustY:100},maxWidth:280},{target:$("#save-button-container"),title:"Speichern",content:"<p>Jetzt, da Du hoffentlich ein paar Änderungen speichern musst, kannst Du mit dieser schicken Schaltfläche Speichern speichern.</p><p>Für diejenigen unter Euch, die Hotkeys mögen, verwende <strong>Strg + S</strong> zum Speichern.</p>",position:{my:"top right",at:"bottom center"},tip:"top right"},{target:$("li#mode-design a"),title:"Design Editor",content:"<p>Danke, dass du bei uns bleibst!</p><p>Nachdem Du den Gitter-Modus verstanden hast, hoffen wir, dass Du bei uns bleiben und zum Design-Modus übergehen wirst.</p>",position:{my:"top left",at:"bottom center",adjustY:5},tip:"top left",buttonText:"Fahre mit dem Entwurfsmodus fort",buttonCallback:function(){$.post(UpFront.ajaxURL,{security:UpFront.security,action:"upfront_visual_editor",method:"ran_tour",mode:"grid",complete:function(){UpFront.ranTour.grid=true;$("li#mode-design a").trigger("click");window.location=$("li#mode-design a").attr("href");}});}}];tourStepsDesign=[{beginning:true,title:"Willkommen im UpFront Design Editor!",content:"<p>Im <strong>Design Editor</strong> kannst Du Deine Elemente nach Deinen Wünschen gestalten.</p><p>Egal, ob es sich um Schriftarten, Farben, Auffüllungen, Ränder, Schatten oder abgerundete Ecken handelt, Du kannst den Design-Editor verwenden.</p><p>Bleibe dabei, um mehr zu erfahren!</p>"},{target:"#side-panel-top",title:"Elementauswahl",content:"<p>Mit der Elementauswahl kannst Du auswählen, welches Element bearbeitet werden soll.</p>",position:{my:"right top",at:"left center"},callback:function(){$("li#element-block-header > span.element-name").trigger("click");}},{target:"#toggle-inspector",title:"Inspektor",content:"					<p>Anstatt die <em>Elementauswahl</em> zu verwenden, lasse den Inspektor die Arbeit für Dich erledigen.</p>					<p><strong>Versuch es!</strong> Zeige mit der rechten Maustaste auf das Element, das Du bearbeiten möchtest, und es wird ausgewählt!</p>				",position:{my:"top right",at:"bottom center",adjustX:10,adjustY:5}},{target:"window",title:"Viel Spaß beim Bauen mit UpFront!",content:'<p>Wir hoffen, Du findest UpFront für das leistungsstärkste und benutzerfreundlichste WordPress-Framework, das es gibt.</p><p>Wenn Du Fragen hast, zögere bitte nicht, die <a href="https://n3rds.work/gruppen/upfront-community/" target="_blank">Community</a> zu besuchen.</p>',end:true}];return{start:function(){if(UpFront.mode=="grid"){var steps=tourStepsGrid;hidePanel();openBox("grid-manager");}else{if(UpFront.mode=="design"){var steps=tourStepsDesign;showPanel();require(["modules/design/mode-design"],function(){showDesignEditor();});if(typeof $("div#panel").data("ui-tabs")!="undefined"){selectTab("editor-tab",$("div#panel"));}}else{return;}}$('<div class="black-overlay"></div>').hide().attr("id","black-overlay-tour").css("zIndex",15).appendTo("body").fadeIn(500);$(document.body).qtip({id:"tour",content:{text:steps[0].content+'<div id="tour-next-container"><span id="tour-next" class="tour-button button button-blue">Tour fortsetzen <span class="arrow">&rsaquo;</span></span></div>',title:{text:steps[0].title,button:"Tour überspringen"}},style:{classes:"qtip-tour",tip:{width:18,height:10,mimic:"center",offset:10}},position:{my:"center",at:"center",target:$(window),viewport:$(window),adjust:{y:5,method:"shift shift"}},show:{event:false,ready:true,effect:function(){$(this).fadeIn(500);}},hide:false,events:{render:function(event,api){$("#iframe-notice").remove();hideIframeOverlay();openBox("grid-manager");var tooltip=api.elements.tooltip;api.step=0;tooltip.bind("next",function(event){$(window).trigger("resize");api.step+=1;api.step=Math.min(steps.length-1,Math.max(0,api.step));currentTourStep=steps[api.step];$("div#black-overlay-tour").fadeOut(100,function(){$(this).remove();});if(typeof currentTourStep.callback==="function"){currentTourStep.callback.apply(api);}if(currentTourStep.target=="window"){currentTourStep.target=$(window);}else{if(typeof currentTourStep.target=="string"){currentTourStep.target=$(currentTourStep.target);}else{if(typeof currentTourStep.iframeTarget=="string"){currentTourStep.target=$i(currentTourStep.iframeTarget).first();}}}api.set("position.target",currentTourStep.target);if(typeof currentTourStep.maxWidth!=="undefined"&&window.innerWidth<1440){$(".qtip-tour").css("maxWidth",currentTourStep.maxWidth);}else{$(".qtip-tour").css("maxWidth",350);}var buttonText="Nächster";if(typeof currentTourStep.buttonText=="string"){var buttonText=currentTourStep.buttonText;}if(typeof currentTourStep.end!=="undefined"&&currentTourStep.end===true){var button='<div id="tour-next-container"><span id="tour-finish" class="tour-button button button-blue">Tour schließen <span class="arrow">&rsaquo;</span></div>';}else{if(typeof currentTourStep.nextHandler==="undefined"||currentTourStep.nextHandler.showButton){var button='<div id="tour-next-container"><span id="tour-next" class="tour-button button button-blue">'+buttonText+' <span class="arrow">&rsaquo;</span></div>';}else{var button='<div id="tour-next-container"><p>'+currentTourStep.nextHandler.message+"</p></div>";}}if(typeof currentTourStep.nextHandler!=="undefined"&&$(currentTourStep.nextHandler.clickElement)){var nextHandlerCallback=function(event){$(".qtip-tour").triggerHandler("next");event.preventDefault();$(this).unbind("click",nextHandlerCallback);};$(currentTourStep.nextHandler.clickElement).bind("click",nextHandlerCallback);}api.set("content.text",currentTourStep.content+button);api.set("content.title",currentTourStep.title);if(typeof currentTourStep.end==="undefined"){if(typeof currentTourStep.position!=="undefined"){api.set("position.my",currentTourStep.position.my);api.set("position.at",currentTourStep.position.at);if(typeof currentTourStep.position.adjustX!=="undefined"){api.set("position.adjust.x",currentTourStep.position.adjustX);}else{api.set("position.adjust.x",0);}if(typeof currentTourStep.position.adjustY!=="undefined"){api.set("position.adjust.y",currentTourStep.position.adjustY);}else{api.set("position.adjust.y",0);}}else{api.set("position.my","top center");api.set("position.at","bottom center");}if(typeof currentTourStep.tip!=="undefined"){api.set("style.tip.corner",currentTourStep.tip);}}else{api.set("position.my","center");api.set("position.at","center");}});$("div.qtip-tour").on("click","span#tour-next",function(event){if(typeof currentTourStep=="object"&&typeof currentTourStep.buttonCallback=="function"){currentTourStep.buttonCallback.call();}$(".qtip-tour").triggerHandler("next");event.preventDefault();});$("div.qtip-tour").on("click","span#tour-finish",function(event){$(".qtip-tour").qtip("hide");});},hide:function(event,api){$("div#tour-overlay").remove();$("div#black-overlay-tour").fadeOut(100,function(){$(this).remove();});$(".qtip-tour").fadeOut(100,function(){$(this).qtip("destroy");});if(UpFront.ranTour[UpFront.mode]==false&&UpFront.ranTour.legacy!=true){$.post(UpFront.ajaxURL,{security:UpFront.security,action:"upfront_visual_editor",method:"ran_tour",mode:UpFront.mode});UpFront.ranTour[UpFront.mode]=true;}}}});}};});